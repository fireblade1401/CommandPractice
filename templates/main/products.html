{% extends 'base.html' %}
{% load static %}
{% block content %}
          <div class="computers_section layout_padding">
             <div class="container">
                <h1 class="computers_taital">Наши товары</h1>
             </div>
          </div>
        <div class="container">
            <div class="filter-section mt-4">
                <form method="get" action="{% url 'products' %}" class="row g-3">
                    <!-- Фильтрация по категориям -->
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="category-filter" class="form-label">Категория:</label>
                            <select id="category-filter" name="category" class="form-control">
                                <option value="">Выберите категорию</option>
                                {% for cat in category %}
                                <option value="{{ cat.id }}">{{ cat.category_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Фильтрация по цене -->
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="min-price" class="form-label">Минимальная цена:</label>
                            <input type="number" id="min-price" name="min_price" placeholder="Мин. цена" class="form-control">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="max-price" class="form-label">Максимальная цена:</label>
                            <input type="number" id="max-price" name="max_price" placeholder="Макс. цена" class="form-control">
                        </div>
                    </div>

                    <!-- Сортировка -->
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="sort-by" class="form-label">Сортировать по:</label>
                            <select id="sort-by" name="sort_by" class="form-control">
                                <option value="product_price">Цена (по возрастанию) ↑</option>
                                <option value="-product_price">Цена (по убыванию) ↓</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <input type="submit" value="Применить фильтры" class="btn btn-primary">
                    </div>
                </form>
            </div>


        </div>
      <div class="computers_section_2">
         <div class="container-fluid">
            <div class="computer_main">
               <div class="row">
                   {% for i in products %}
                  <div class="col-md-4">
                     <div class="computer_img"><img src="{{ i.product_image.url }}"></div>
                     <h4 class="computer_text">{{ i.product_name }}</h4>
                     <div class="computer_text_main">
                        <p class="dell_text">{{ i.category }}</p>
                        <h6 class="price_text"><a href="#">{{ i.product_price }}₸</a></h6>
                     </div>
                     <div class="cart_bt_1"><a href="{% url 'add_to_cart' i.id %}">Заказать</a></div>
                  </div>
                   {% endfor %}
               </div>
            </div>
         </div>
      </div>
{% endblock %}
